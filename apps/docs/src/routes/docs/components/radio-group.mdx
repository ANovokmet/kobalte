import { Preview, Kbd } from "../../../components";
import {
  RadioGroup,
  Radio,
  ControlledExample,
  HTMLFormExample,
} from "../../../examples/radio-group";

# Radio Group

A set of checkable buttons, known as radio buttons, where no more than one of the buttons can be checked at a time.

## Import

```ts
import { RadioGroup } from "@kobalte/core";
```

## Features

- Follow the [WAI ARIA Radio Group](https://www.w3.org/WAI/ARIA/apg/patterns/radiobutton/) design pattern.
- Each radio is built with a native HTML `<input>` element, which is visually hidden to allow custom styling.
- Syncs with form reset events.
- Group and radio labeling support for assistive technology.
- Can be controlled or uncontrolled.

## Anatomy

The radio group consists of:

- **RadioGroup**: The root container for the radio group.
- **RadioGroup.Label**: The label that gives the user information on the radio group.
- **RadioGroup.Description**: The description that gives the user more information on the radio group.
- **RadioGroup.ErrorMessage**: The error message that gives the user information about how to fix a validation error on the radio group.

The radio item consists of:

- **RadioGroup.Item**: The root container for a radio button.
- **RadioGroup.ItemInput**: The native html input that is visually hidden in the radio button.
- **RadioGroup.ItemControl**: The element that visually represents a radio button.
- **RadioGroup.ItemIndicator**: The visual indicator rendered when the radio button is in a checked state.
- **RadioGroup.ItemLabel**: The label that gives the user information on the radio button.

```tsx
<RadioGroup>
  <RadioGroup.Label />

  <RadioGroup.Item>
    <RadioGroup.ItemInput />
    <RadioGroup.ItemControl>
      <RadioGroup.ItemIndicator />
    </RadioGroup.ItemControl>
    <RadioGroup.ItemLabel />
  </RadioGroup.Item>

  <RadioGroup.Description />
  <RadioGroup.ErrorMessage />
</RadioGroup>
```

## Example

<Preview>
  <RadioGroup label="Favorite fruit">
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx
import { RadioGroup as RadioGroupBase } from "@kobalte/core";
import { ComponentProps, JSX, Show, splitProps } from "solid-js";

type RadioGroupBaseProps = ComponentProps<typeof RadioGroupBase>;

interface RadioGroupProps extends RadioGroupBaseProps {
  label?: JSX.Element;
}

export function RadioGroup(props: RadioGroupProps) {
  const [local, others] = splitProps(props, ["label", "description", "errorMessage", "children"]);

  return (
    <RadioGroupBase orientation="horizontal" class="space-y-2" {...others}>
      <Show when={local.label}>
        <RadioGroupBase.Label class="text-base text-zinc-800 font-medium dark:text-white/90 ui-disabled:opacity-40">
          {local.label}
        </RadioGroupBase.Label>
      </Show>
      <div class="flex space-x-4">{local.children}</div>
      <Show when={local.description}>
        <RadioGroupBase.Description class="text-sm text-zinc-600 dark:text-zinc-400 ui-disabled:opacity-40">
          {local.description}
        </RadioGroupBase.Description>
      </Show>
      <Show when={local.errorMessage}>
        <RadioGroupBase.ErrorMessage class="text-sm text-red-600 dark:text-red-400 ui-disabled:opacity-40">
          {local.errorMessage}
        </RadioGroupBase.ErrorMessage>
      </Show>
    </RadioGroupBase>
  );
}

export function Radio(props: ComponentProps<typeof RadioGroupBase.Item>) {
  const [local, others] = splitProps(props, ["value", "children"]);

  return (
    <RadioGroupBase.Item
      value={local.value}
      class="flex items-center ui-disabled:opacity-40"
      {...others}
    >
      <RadioGroupBase.ItemInput />
      <RadioGroupBase.ItemControl class="flex items-center justify-center transition h-5 w-5 rounded-full border border-zinc-400 dark:border-zinc-600 mr-2 ui-hover:bg-blue-50 dark:ui-hover:bg-blue-900/60 ui-focus-visible:border-blue-500 ui-focus-visible:ring ui-focus-visible:ring-blue-100 dark:ui-focus-visible:border-blue-600 dark:ui-focus-visible:ring-blue-900/60">
        <RadioGroupBase.ItemIndicator class="h-2.5 w-2.5 rounded-full bg-blue-500" />
      </RadioGroupBase.ItemControl>
      <RadioGroupBase.ItemLabel class="text-sm text-zinc-900 dark:text-white/90 first-letter:uppercase">
        {local.children}
      </RadioGroupBase.ItemLabel>
    </RadioGroupBase.Item>
  );
}

function App() {
  return (
    <RadioGroup label="Favorite fruit">
      <Radio value="apple">Apple</Radio>
      <Radio value="orange">Orange</Radio>
      <Radio value="watermelon">Watermelon</Radio>
    </RadioGroup>
  );
}
```

## Usage

The following examples show how to use the `RadioGroup` component created in the above example.

### Default value

An initial, uncontrolled value can be provided to the radio group using the `defaultValue` prop, which accepts a value corresponding with the `value` prop of each radio.

<Preview>
  <RadioGroup label="Favorite fruit" defaultValue="orange">
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {0}
<RadioGroup label="Favorite fruit" defaultValue="orange">
  <Radio value="apple">Apple</Radio>
  <Radio value="orange">Orange</Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

### Controlled value

A controlled value can be provided using the `value` prop, which accepts a value corresponding with the `value` prop of each radio. The `onValueChange` event is fired when the user selects a radio.

<Preview>
  <ControlledExample />
</Preview>

```tsx {3,7}
import { createSignal } from "solid-js";

function ControlledExample() {
  const [value, setValue] = createSignal("orange");

  return (
    <>
      <RadioGroup label="Favorite fruit" value={value()} onValueChange={setValue}>
        <Radio value="apple">Apple</Radio>
        <Radio value="orange">Orange</Radio>
        <Radio value="watermelon">Watermelon</Radio>
      </RadioGroup>
      <p>Your favorite fruit is: {value()}.</p>
    </>
  );
}
```

### Description

The `RadioGroup.Description` component can be used to associate additional help text with a radio group.

<Preview>
  <RadioGroup label="Favorite fruit" description="Choose wisely">
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {0}
<RadioGroup label="Favorite fruit" description="Choose wisely">
  <Radio value="apple">Apple</Radio>
  <Radio value="orange">Orange</Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

### Error message

The `RadioGroup.ErrorMessage` component can be used to help the user fix a validation error. It should be combined with the `validationState` prop to semantically mark the radio group as invalid for assistive technologies.

By default `RadioGroup.ErrorMessage` will render only when the radio group is _invalid_, use the `forceMount` prop to always render the error message (ex: for usage with animation libraries).

<Preview>
  <RadioGroup label="Favorite fruit" validationState="invalid" errorMessage="Please choose a fruit">
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {0}
<RadioGroup label="Favorite fruit" validationState="invalid" errorMessage="Please choose a fruit">
  <Radio value="apple">Apple</Radio>
  <Radio value="orange">Orange</Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

### Disabled

The entire radio group can be disabled with the `isDisabled` prop.

<Preview>
  <RadioGroup label="Favorite fruit" isDisabled>
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {0}
<RadioGroup label="Favorite fruit" isDisabled>
  <Radio value="apple">Apple</Radio>
  <Radio value="orange">Orange</Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

To disable an individual radio, pass `isDisabled` to the radio instead.

<Preview>
  <RadioGroup label="Favorite fruit">
    <Radio value="apple">Apple</Radio>
    <Radio value="orange" isDisabled>
      Orange
    </Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {2}
<RadioGroup label="Favorite fruit">
  <Radio value="apple">Apple</Radio>
  <Radio value="orange" isDisabled>
    Orange
  </Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

### Read only

The `isReadOnly` prop makes the radio group selection immutable while remaining focusable.

<Preview>
  <RadioGroup label="Favorite fruit" isReadOnly>
    <Radio value="apple">Apple</Radio>
    <Radio value="orange">Orange</Radio>
    <Radio value="watermelon">Watermelon</Radio>
  </RadioGroup>
</Preview>

```tsx {0}
<RadioGroup label="Favorite fruit" isReadOnly>
  <Radio value="apple">Apple</Radio>
  <Radio value="orange">Orange</Radio>
  <Radio value="watermelon">Watermelon</Radio>
</RadioGroup>
```

### HTML forms

The radio group supports the `name` prop, paired with the radio `value` prop, for integration with HTML forms.

<Preview>
  <HTMLFormExample />
</Preview>

```tsx {14}
function HTMLFormExample() {
  let formRef: HTMLFormElement | undefined;

  const onSubmit = (e: SubmitEvent) => {
    e.preventDefault();
    e.stopPropagation();

    const formData = new FormData(formRef);

    alert(JSON.stringify(Object.fromEntries(formData), null, 2));
  };

  return (
    <form ref={formRef} onSubmit={onSubmit} class="flex flex-col items-start space-y-4">
      <RadioGroup label="Favorite fruit" name="fruit">
        <Radio value="apple">Apple</Radio>
        <Radio value="orange">Orange</Radio>
        <Radio value="watermelon">Watermelon</Radio>
      </RadioGroup>
      <div class="flex space-x-2">
        <button type="reset" class="text-sm rounded border border-zinc-600 px-3">
          Reset
        </button>
        <button class="text-sm rounded text-white bg-blue-600 px-3">Submit</button>
      </div>
    </form>
  );
}
```

## API Reference

### RadioGroup

| Prop            | Description                                                                                                                                                         |
| :-------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| value           | `string` <br/> The controlled value of the radio button to check.                                                                                                   |
| defaultValue    | `string` <br/> The value of the radio button that should be checked when initially rendered. Useful when you do not need to control the state of the radio buttons. |
| onValueChange   | `(value: string) => void` <br/> Event handler called when the value changes.                                                                                        |
| orientation     | `'horizontal' \| 'vertical'` <br/> The axis the radio group items should align with.                                                                                |
| name            | `string` <br/> The name of the radio group. Submitted with its owning form as part of a name/value pair.                                                            |
| validationState | `'valid' \| 'invalid'` <br/> Whether the radio group should display its "valid" or "invalid" visual styling.                                                        |
| isRequired      | `boolean` <br/> Whether the user must check a radio group item before the owning form can be submitted.                                                             |
| isDisabled      | `boolean` <br/> Whether the radio group is disabled.                                                                                                                |
| isReadOnly      | `boolean` <br/> Whether the radio group items can be selected but not changed by the user.                                                                          |

| Data attribute | Description                                                                                  |
| :-------------- | :------------------------------------------------------------------------------------------- |
| data-valid      | Present when the radio group is valid according to the validation rules.                     |
| data-invalid    | Present when the radio group is invalid according to the validation rules.                   |
| data-required   | Present when the user must check a radio group item before the owning form can be submitted. |
| data-disabled   | Present when the radio group is disabled.                                                    |
| data-readonly   | Present when the radio group is read only.                                                   |

`RadioGroup.Label`, `RadioGroup.Description` and `RadioGroup.ErrorMesssage` shares the same data-attributes.

### RadioGroup.ErrorMessage

| Prop       | Description                                                                                                                             |
| :--------- | :-------------------------------------------------------------------------------------------------------------------------------------- |
| forceMount | `boolean` <br/> Used to force mounting when more control is needed. Useful when controlling animation with SolidJS animation libraries. |

### RadioGroup.Item

| Prop       | Description                                                                                                                                                              |
| :--------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| value      | `string` <br/> The value of the radio button, used when submitting an HTML form. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio#Value). |
| isDisabled | `boolean` <br/> Whether the radio button is disabled or not.                                                                                                             |

| Data attribute    | Description                                                                       |
| :----------------- | :-------------------------------------------------------------------------------- |
| data-valid         | Present when the parent radio group is valid according to the validation rules.   |
| data-invalid       | Present when the parent radio group is invalid according to the validation rules. |
| data-checked       | Present when the radio is checked.                                                |
| data-disabled      | Present when the radio is disabled.                                               |
| data-hover         | Present when the radio is hovered.                                                |
| data-focus         | Present when the radio is focused.                                                |
| data-focus-visible | Present when the radio is focused via keyboard.                                   |

`RadioGroup.ItemControl`, `RadioGroup.ItemIndicator` and `RadioGroup.ItemLabel` shares the same data-attributes.

### RadioGroup.ItemIndicator

| Prop       | Description                                                                                                                             |
| :--------- | :-------------------------------------------------------------------------------------------------------------------------------------- |
| forceMount | `boolean` <br/> Used to force mounting when more control is needed. Useful when controlling animation with SolidJS animation libraries. |

## Accessibility

### Keyboard Interactions

| Key                   | Description                                                                            |
| :-------------------- | :------------------------------------------------------------------------------------- |
| <Kbd>Tab</Kbd>        | Moves focus to either the checked radio button or the first radio button in the group. |
| <Kbd>Space</Kbd>      | When focus is on an unchecked radio button, checks it.                                 |
| <Kbd>ArrowDown</Kbd>  | Moves focus and checks the next radio button in the group.                             |
| <Kbd>ArrowRight</Kbd> | Moves focus and checks the next radio button in the group.                             |
| <Kbd>ArrowUp</Kbd>    | Moves focus and checks the previous radio button in the group.                         |
| <Kbd>ArrowLeft</Kbd>  | Moves focus and checks the previous radio button in the group.                         |
